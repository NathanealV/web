version: '2.0'

services:

  # Accessible in IB.ai network on http://api:8080
  api:
    build:
      context: ./api/
      dockerfile: api/Dockerfile
    env_file:
      - api/.env
    networks:
      - ibai_main

  # Publicly accessible on http://<host>/
  web:
    build:
      context: ./web/
      dockerfile: web/Dockerfile
    ports:
      - "80:80"
    networks:
      - ibai_main

# Connecting to bot's network.
# The IB.ai docker-compose must be started first.
networks:
  ibai_main:
    external: true